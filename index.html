<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CELPIP 12 Prep Tracker — IMAX Edition</title>
  <!-- TailwindCSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* ------------------------------
       GLOBAL BACKGROUND & FONT
    -------------------------------*/
    body {
      margin: 0;
      min-height: 100vh;
      background: linear-gradient(-45deg, #0f0c29, #302b63, #24243e, #1b2735);
      background-size: 400% 400%;
      animation: gradientBG 20s ease infinite;
      font-family: 'Inter', sans-serif;
      color: #f8fafc;
    }
    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* ------------------------------
       GLASSMORPHIC CARDS
    -------------------------------*/
    .card {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 1rem;
      transition: all 0.4s ease;
      opacity: 0;
      transform: translateY(30px);
      animation: fadeIn 1s forwards;
    }
    .card:hover {
      transform: translateY(-6px) scale(1.03);
      box-shadow: 0 0 30px rgba(0, 255, 255, 0.35);
    }
    @keyframes fadeIn {
      to { opacity: 1; transform: translateY(0); }
    }

    /* ------------------------------
       PROGRESS CIRCLE
    -------------------------------*/
    .progress-ring {
      transform: rotate(-90deg);
    }
    .progress-ring__circle {
      transition: 0.35s stroke-dasharray;
      transform-origin: center;
    }

    /* ------------------------------
       CHECKBOX STYLE
    -------------------------------*/
    input[type="checkbox"] {
      accent-color: #06b6d4; /* cyan */
      transform: scale(1.2);
      cursor: pointer;
    }

    /* ------------------------------
       NEON TEXT SHADOW
    -------------------------------*/
    .neon {
      text-shadow: 0 0 5px #00fff7, 0 0 10px #00fff7, 0 0 20px #00fff7;
    }
  </style>
</head>
<body>

  <!-- ------------------------------
       HEADER
  ------------------------------- -->
  <header class="text-center py-10">
    <h1 class="text-5xl font-extrabold bg-gradient-to-r from-cyan-400 to-fuchsia-400 bg-clip-text text-transparent neon">
      CELPIP 12 Prep Tracker
    </h1>
    <p class="text-gray-300 mt-2 text-lg">Aug 26 – Sept 13, 2025 | One Module per Day 🎯</p>
  </header>

  <!-- ------------------------------
       TOP PROGRESS BAR
  ------------------------------- -->
  <div class="w-full h-3 bg-gray-800 rounded-full overflow-hidden mb-10">
    <div id="top-progress-bar" class="h-3 bg-gradient-to-r from-cyan-400 to-fuchsia-400 transition-all duration-500"></div>
  </div>

  <!-- ------------------------------
       DASHBOARD SECTION
  ------------------------------- -->
  <section id="dashboard" class="p-10 space-y-12">

    <!-- Progress Circle -->
    <div class="flex justify-center items-center relative">
      <svg class="progress-ring w-52 h-52" viewBox="0 0 120 120">
        <circle class="text-gray-800" stroke="currentColor" stroke-width="12" fill="transparent" r="54" cx="60" cy="60"/>
        <circle class="progress-ring__circle text-cyan-400" stroke="currentColor" stroke-width="12" stroke-linecap="round" fill="transparent" r="54" cx="60" cy="60"
          stroke-dasharray="0 339.292"/>
      </svg>
      <div class="absolute text-center">
        <p class="text-4xl font-bold" id="progress-text">0%</p>
        <p class="text-sm text-gray-300">Exam Readiness</p>
      </div>
    </div>

    <!-- STREAK TRACKER -->
    <div class="card p-6 text-center max-w-md mx-auto">
      <h2 class="text-xl font-semibold text-cyan-300">🔥 Study Streak</h2>
      <p class="text-4xl font-bold mt-3" id="streak-counter">0 days</p>
      <p class="text-sm text-gray-400">Consecutive days you’ve completed all tasks</p>
    </div>

    <!-- STATISTICS CARDS -->
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 max-w-4xl mx-auto">
      <!-- Tasks Done -->
      <div class="card p-6 text-center">
        <h3 class="text-lg font-semibold text-fuchsia-300">Tasks Completed</h3>
        <p id="tasks-completed" class="text-3xl font-bold mt-2">0</p>
      </div>
      <!-- Days Left -->
      <div class="card p-6 text-center">
        <h3 class="text-lg font-semibold text-cyan-300">Days Left</h3>
        <p id="days-left" class="text-3xl font-bold mt-2">0</p>
      </div>
      <!-- Completion -->
      <div class="card p-6 text-center">
        <h3 class="text-lg font-semibold text-green-300">Overall Progress</h3>
        <p id="overall-progress" class="text-3xl font-bold mt-2">0%</p>
      </div>
    </div>

    <!-- MOTIVATIONAL QUOTES -->
    <div class="card p-6 text-center max-w-2xl mx-auto">
      <h2 class="text-xl font-semibold text-yellow-300">💡 Daily Motivation</h2>
      <blockquote id="quote" class="mt-4 italic text-gray-200">Loading...</blockquote>
      <button onclick="newQuote()" class="mt-4 px-4 py-2 bg-cyan-500 text-white rounded-lg hover:bg-cyan-400 transition">
        New Quote
      </button>
    </div>

  </section>

    <!-- ------------------------------
       DAILY TASKS SECTION
  ------------------------------- -->
  <section id="tasks" class="p-10">
    <h2 class="text-3xl font-bold text-center mb-10 bg-gradient-to-r from-cyan-400 to-fuchsia-400 bg-clip-text text-transparent neon">
      📅 Daily Study Plan
    </h2>

    <!-- Task Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">

      <!-- Aug 26 (Writing) -->
      <div class="card p-6 border-l-4 border-cyan-400" style="animation-delay:0.1s">
        <h3 class="text-xl font-semibold text-cyan-300">Aug 26 (Day 1) — Writing</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> 📝 Task 1 Email (formal)</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Task 2 Opinion essay (timed)</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Revise essay with connectors</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Vocabulary upgrade</label></li>
        </ul>
      </div>

      <!-- Aug 27 (Speaking) -->
      <div class="card p-6 border-l-4 border-pink-400" style="animation-delay:0.2s">
        <h3 class="text-xl font-semibold text-pink-300">Aug 27 (Day 2) — Speaking</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> 🎙 Record 3 prompts (describe, compare, opinion)</label></li>
          <li><label><input type="checkbox" class="task"> 🎙 Review recordings, rewrite weak sentences</label></li>
          <li><label><input type="checkbox" class="task"> 🎙 Use idioms & linking words</label></li>
          <li><label><input type="checkbox" class="task"> 🎙 1 long response (60s)</label></li>
        </ul>
      </div>

      <!-- Aug 28 (Reading) -->
      <div class="card p-6 border-l-4 border-green-400" style="animation-delay:0.3s">
        <h3 class="text-xl font-semibold text-green-300">Aug 28 (Day 3) — Reading</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> 📖 3 practice passages (timed)</label></li>
          <li><label><input type="checkbox" class="task"> 📖 Identify author’s assumptions</label></li>
          <li><label><input type="checkbox" class="task"> 📖 Drill inference questions</label></li>
          <li><label><input type="checkbox" class="task"> 📖 Summarize each passage</label></li>
        </ul>
      </div>

      <!-- Aug 29 (Writing) -->
      <div class="card p-6 border-l-4 border-cyan-400" style="animation-delay:0.4s">
        <h3 class="text-xl font-semibold text-cyan-300">Aug 29 (Day 4) — Writing</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> 📝 Task 1 (complaint email)</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Task 2 (persuasive essay)</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Edit for grammar variety</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Self-grade with rubric</label></li>
        </ul>
      </div>

      <!-- Aug 30 (Speaking) -->
      <div class="card p-6 border-l-4 border-pink-400" style="animation-delay:0.5s">
        <h3 class="text-xl font-semibold text-pink-300">Aug 30 (Day 5) — Speaking</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> 🎙 4 prompts (storytelling)</label></li>
          <li><label><input type="checkbox" class="task"> 🎙 Use conditionals naturally</label></li>
          <li><label><input type="checkbox" class="task"> 🎙 Practice rhetorical Qs</label></li>
          <li><label><input type="checkbox" class="task"> 🎙 1 mock Speaking task (full set)</label></li>
        </ul>
      </div>

      <!-- Aug 31 (Reading) -->
      <div class="card p-6 border-l-4 border-green-400" style="animation-delay:0.6s">
        <h3 class="text-xl font-semibold text-green-300">Aug 31 (Day 6) — Reading</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> 📖 3 inference passages</label></li>
          <li><label><input type="checkbox" class="task"> 📖 Identify tone & bias</label></li>
          <li><label><input type="checkbox" class="task"> 📖 Answer “most likely” Qs</label></li>
          <li><label><input type="checkbox" class="task"> 📖 Summarize author’s argument</label></li>
        </ul>
      </div>

      <!-- Sept 1 (Writing) -->
      <div class="card p-6 border-l-4 border-cyan-400" style="animation-delay:0.7s">
        <h3 class="text-xl font-semibold text-cyan-300">Sept 1 (Day 7) — Writing</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> 📝 Task 1 + Task 2 back-to-back</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Add counterargument & refutation</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Replace weak verbs</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Self-review & polish</label></li>
        </ul>
      </div>

      <!-- Sept 2 (Speaking) -->
      <div class="card p-6 border-l-4 border-pink-400" style="animation-delay:0.8s">
        <h3 class="text-xl font-semibold text-pink-300">Sept 2 (Day 8) — Speaking</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> 🎙 Record 5 prompts (compare, advise, describe)</label></li>
          <li><label><input type="checkbox" class="task"> 🎙 Focus on smooth delivery</label></li>
          <li><label><input type="checkbox" class="task"> 🎙 Review for filler words</label></li>
          <li><label><input type="checkbox" class="task"> 🎙 1 timed long response</label></li>
        </ul>
      </div>

      <!-- Sept 3 (Reading) -->
      <div class="card p-6 border-l-4 border-green-400" style="animation-delay:0.9s">
        <h3 class="text-xl font-semibold text-green-300">Sept 3 (Day 9) — Reading</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> 📖 4 practice passages (timed)</label></li>
          <li><label><input type="checkbox" class="task"> 📖 Identify argument flow</label></li>
          <li><label><input type="checkbox" class="task"> 📖 Tone/inference drills</label></li>
          <li><label><input type="checkbox" class="task"> 📖 Summarize key thesis</label></li>
        </ul>
      </div>

      <!-- Sept 4 (Writing) -->
      <div class="card p-6 border-l-4 border-cyan-400" style="animation-delay:1s">
        <h3 class="text-xl font-semibold text-cyan-300">Sept 4 (Day 10) — Writing</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> 📝 Task 1 polished essay</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Task 2 (timed opinion essay)</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Revise connectors</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Peer/self-evaluation</label></li>
        </ul>
      </div>

      <!-- Sept 5 (Speaking) -->
      <div class="card p-6 border-l-4 border-pink-400" style="animation-delay:1.1s">
        <h3 class="text-xl font-semibold text-pink-300">Sept 5 (Day 11) — Speaking</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> 🎙 4 prompts (timed)</label></li>
          <li><label><input type="checkbox" class="task"> 🎙 Add counterarguments</label></li>
          <li><label><input type="checkbox" class="task"> 🎙 Check fluency and pacing</label></li>
          <li><label><input type="checkbox" class="task"> 🎙 Mock full Speaking test</label></li>
        </ul>
      </div>

            <!-- Sept 6 (Writing) -->
      <div class="card p-6 border-l-4 border-cyan-400" style="animation-delay:1.2s">
        <h3 class="text-xl font-semibold text-cyan-300">Sept 6 (Day 12) — Writing</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> 📝 Task 2 opinion essay (polish)</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Add variety in grammar</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Revise 2 old essays</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Vocabulary list update</label></li>
        </ul>
        <p class="hidden mt-4 text-green-300 font-bold text-center complete-badge">✅ Day Completed!</p>
      </div>

      <!-- Sept 7 MOCK TEST -->
      <div class="card p-6 border-2 border-yellow-400" style="animation-delay:1.3s">
        <h3 class="text-xl font-semibold text-yellow-300">Sept 7 — Full Mock Test</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> ✅ Full CELPIP Mock (all 4 skills)</label></li>
          <li><label><input type="checkbox" class="task"> 📊 Review & error log</label></li>
        </ul>
        <p class="hidden mt-4 text-green-300 font-bold text-center complete-badge">✅ Day Completed!</p>
      </div>

      <!-- Sept 8 (Writing) -->
      <div class="card p-6 border-l-4 border-cyan-400" style="animation-delay:1.4s">
        <h3 class="text-xl font-semibold text-cyan-300">Sept 8 (Day 14) — Writing</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> 📝 Task 1 polished email</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Revise old essays</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Upgrade transitions</label></li>
          <li><label><input type="checkbox" class="task"> 📝 1 full timed set</label></li>
        </ul>
        <p class="hidden mt-4 text-green-300 font-bold text-center complete-badge">✅ Day Completed!</p>
      </div>

      <!-- Sept 9 (Speaking) -->
      <div class="card p-6 border-l-4 border-pink-400" style="animation-delay:1.5s">
        <h3 class="text-xl font-semibold text-pink-300">Sept 9 (Day 15) — Speaking</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> 🎙 5 prompts (timed)</label></li>
          <li><label><input type="checkbox" class="task"> 🎙 Refine idioms/phrases</label></li>
          <li><label><input type="checkbox" class="task"> 🎙 Eliminate filler words</label></li>
          <li><label><input type="checkbox" class="task"> 🎙 1 mock speaking test</label></li>
        </ul>
        <p class="hidden mt-4 text-green-300 font-bold text-center complete-badge">✅ Day Completed!</p>
      </div>

      <!-- Sept 10 MINI MOCK -->
      <div class="card p-6 border-2 border-yellow-400" style="animation-delay:1.6s">
        <h3 class="text-xl font-semibold text-yellow-300">Sept 10 — Mini Mock</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> 📝 Writing + Speaking (mock)</label></li>
          <li><label><input type="checkbox" class="task"> 📖 Reading (2 passages)</label></li>
          <li><label><input type="checkbox" class="task"> 🎧 Listening practice</label></li>
        </ul>
        <p class="hidden mt-4 text-green-300 font-bold text-center complete-badge">✅ Day Completed!</p>
      </div>

      <!-- Sept 11 (Writing) -->
      <div class="card p-6 border-l-4 border-cyan-400" style="animation-delay:1.7s">
        <h3 class="text-xl font-semibold text-cyan-300">Sept 11 (Day 17) — Writing</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> 📝 Final polish essay</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Review grammar range</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Revise vocabulary list</label></li>
          <li><label><input type="checkbox" class="task"> 📝 Short Task 1 drill</label></li>
        </ul>
        <p class="hidden mt-4 text-green-300 font-bold text-center complete-badge">✅ Day Completed!</p>
      </div>

      <!-- Sept 12 (Light Writing) -->
      <div class="card p-6 border-l-4 border-cyan-400" style="animation-delay:1.8s">
        <h3 class="text-xl font-semibold text-cyan-300">Sept 12 (Day 18) — Light Writing</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> 📝 Task 2 polished essay (final)</label></li>
          <li><label><input type="checkbox" class="task"> 🎙 3 speaking prompts (light)</label></li>
          <li><label><input type="checkbox" class="task"> 📖 1 reading passage</label></li>
          <li><label><input type="checkbox" class="task"> 🎧 1 listening clip</label></li>
        </ul>
        <p class="hidden mt-4 text-green-300 font-bold text-center complete-badge">✅ Day Completed!</p>
      </div>

      <!-- Sept 13 EXAM -->
      <div class="card p-6 border-2 border-green-400" style="animation-delay:1.9s">
        <h3 class="text-xl font-semibold text-green-300">Sept 13 — Exam Day</h3>
        <ul class="mt-4 space-y-3 text-sm">
          <li><label><input type="checkbox" class="task"> ⚡ Light warm-up only</label></li>
          <li><label><input type="checkbox" class="task"> 🎙 2 short speaking warm-ups</label></li>
          <li><label><input type="checkbox" class="task"> 📖 Review connectors list</label></li>
          <li><label><input type="checkbox" class="task"> 💧 Rest & hydrate</label></li>
        </ul>
        <p class="hidden mt-4 text-green-300 font-bold text-center complete-badge">✅ Day Completed!</p>
      </div>

    </div><!-- end task grid -->
  </section>

    <!-- ------------------------------
       CALENDAR SECTION
  ------------------------------- -->
  <section id="calendar" class="p-10">
    <h2 class="text-3xl font-bold text-center mb-10 bg-gradient-to-r from-green-400 to-yellow-400 bg-clip-text text-transparent neon">
      📆 Study Calendar (Aug–Sept 2025)
    </h2>

    <!-- Calendar Legend -->
    <div class="flex justify-center gap-6 mb-6 text-sm">
      <span class="flex items-center gap-2"><span class="w-4 h-4 bg-cyan-400 rounded"></span> Writing</span>
      <span class="flex items-center gap-2"><span class="w-4 h-4 bg-pink-400 rounded"></span> Speaking</span>
      <span class="flex items-center gap-2"><span class="w-4 h-4 bg-green-400 rounded"></span> Reading</span>
      <span class="flex items-center gap-2"><span class="w-4 h-4 bg-yellow-400 rounded"></span> Mock Test</span>
      <span class="flex items-center gap-2"><span class="w-4 h-4 bg-lime-400 rounded"></span> Exam</span>
    </div>

    <!-- Static Calendar (Aug-Sep 2025) -->
    <div class="grid grid-cols-7 gap-4 text-center text-gray-200 max-w-4xl mx-auto">
      <!-- Weekday Labels -->
      <div class="font-bold">Sun</div><div class="font-bold">Mon</div><div class="font-bold">Tue</div>
      <div class="font-bold">Wed</div><div class="font-bold">Thu</div><div class="font-bold">Fri</div><div class="font-bold">Sat</div>

      <!-- Empty slots before Aug 26 -->
      <div></div><div></div><div></div><div></div><div>21</div><div>22</div><div>23</div>
      <div>24</div><div>25</div><div class="bg-cyan-400 rounded-lg">26</div>
      <div class="bg-pink-400 rounded-lg">27</div>
      <div class="bg-green-400 rounded-lg">28</div>
      <div class="bg-cyan-400 rounded-lg">29</div>
      <div class="bg-pink-400 rounded-lg">30</div>
      <div class="bg-green-400 rounded-lg">31</div>
      <div class="bg-cyan-400 rounded-lg">1</div>
      <div class="bg-pink-400 rounded-lg">2</div>
      <div class="bg-green-400 rounded-lg">3</div>
      <div class="bg-cyan-400 rounded-lg">4</div>
      <div class="bg-pink-400 rounded-lg">5</div>
      <div class="bg-cyan-400 rounded-lg">6</div>
      <div class="bg-yellow-400 rounded-lg">7</div>
      <div class="bg-cyan-400 rounded-lg">8</div>
      <div class="bg-pink-400 rounded-lg">9</div>
      <div class="bg-yellow-400 rounded-lg">10</div>
      <div class="bg-cyan-400 rounded-lg">11</div>
      <div class="bg-cyan-400 rounded-lg">12</div>
      <div class="bg-lime-400 rounded-lg">13</div>
    </div>
  </section>

  <!-- ------------------------------
       NOTES SECTION
  ------------------------------- -->
  <section id="notes" class="p-10">
    <h2 class="text-3xl font-bold text-center mb-10 bg-gradient-to-r from-fuchsia-400 to-cyan-400 bg-clip-text text-transparent neon">
      📝 Journal & Reflections
    </h2>
    <div class="card p-6 max-w-3xl mx-auto">
      <textarea id="journal" placeholder="Write your thoughts, reflections, or study notes here..."
        class="w-full h-60 p-4 bg-transparent text-gray-200 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyan-400"></textarea>
      <p class="text-sm text-gray-400 mt-2">Saved automatically in your browser (localStorage).</p>
    </div>
  </section>

  <!-- ------------------------------
       SETTINGS SECTION
  ------------------------------- -->
  <section id="settings" class="p-10">
    <h2 class="text-3xl font-bold text-center mb-10 bg-gradient-to-r from-yellow-400 to-pink-400 bg-clip-text text-transparent neon">
      ⚙️ Settings
    </h2>
    <div class="flex flex-col items-center gap-6">
      <button onclick="resetProgress()" class="px-6 py-3 bg-red-500 rounded-lg hover:bg-red-400 transition">Reset All Progress</button>
      <button onclick="toggleTheme()" class="px-6 py-3 bg-cyan-500 rounded-lg hover:bg-cyan-400 transition">Toggle Theme</button>
    </div>
  </section>

  <!-- ------------------------------
       FOOTER
  ------------------------------- -->
  <footer class="text-center text-gray-400 text-sm mt-10 mb-6">
    © 2025 Mohamed Ansar | IMAX Prep Mode 🚀
  </footer>

  <!-- ------------------------------
       SCRIPTS
  ------------------------------- -->
  <script>
    /* ------------------------------
       TASKS + PROGRESS
    ------------------------------- */
    const tasks = document.querySelectorAll('.task');
    const circle = document.querySelector('.progress-ring__circle');
    const radius = circle.r.baseVal.value;
    const circumference = 2 * Math.PI * radius;
    circle.style.strokeDasharray = \`\${circumference} \${circumference}\`;
    circle.style.strokeDashoffset = circumference;
    const progressText = document.getElementById('progress-text');
    const topProgressBar = document.getElementById('top-progress-bar');

    function setProgress(percent) {
      const offset = circumference - percent / 100 * circumference;
      circle.style.strokeDashoffset = offset;
      progressText.textContent = \`\${percent}%\`;
      topProgressBar.style.width = percent + "%";
    }

    function updateProgress() {
      let checked = 0;
      tasks.forEach(task => { if (task.checked) checked++; });
      const percent = Math.round((checked / tasks.length) * 100);
      setProgress(percent);
      document.getElementById('tasks-completed').textContent = checked;
      document.getElementById('overall-progress').textContent = percent + "%";
      localStorage.setItem('celpip-progress', JSON.stringify([...tasks].map(t => t.checked)));

      // show "Day Completed ✅" if all tasks in card checked
      document.querySelectorAll('.card').forEach(card => {
        const boxes = card.querySelectorAll('.task');
        const badge = card.querySelector('.complete-badge');
        if (boxes.length > 0 && [...boxes].every(b => b.checked)) {
          if (badge) badge.classList.remove('hidden');
        } else {
          if (badge) badge.classList.add('hidden');
        }
      });

      // confetti when 100%
      if (percent === 100) {
        launchConfetti();
      }
    }

    // Load saved state
    const saved = JSON.parse(localStorage.getItem('celpip-progress'));
    if (saved) tasks.forEach((task, i) => task.checked = saved[i]);
    updateProgress();
    tasks.forEach(task => task.addEventListener('change', updateProgress));

    /* ------------------------------
       JOURNAL
    ------------------------------- */
    const journal = document.getElementById('journal');
    journal.value = localStorage.getItem('celpip-journal') || "";
    journal.addEventListener('input', () => {
      localStorage.setItem('celpip-journal', journal.value);
    });

    /* ------------------------------
       QUOTES
    ------------------------------- */
    const quotes = [
      "Consistency beats intensity.",
      "One step at a time is still progress.",
      "Discipline is remembering what you want.",
      "Your future self will thank you.",
      "Push yourself, no one else will do it for you."
    ];
    function newQuote() {
      const q = quotes[Math.floor(Math.random()*quotes.length)];
      document.getElementById('quote').textContent = q;
    }
    newQuote();

    /* ------------------------------
       STREAK TRACKER
    ------------------------------- */
    let streak = parseInt(localStorage.getItem('celpip-streak')) || 0;
    document.getElementById('streak-counter').textContent = streak + " days";

    function incrementStreak() {
      streak++;
      localStorage.setItem('celpip-streak', streak);
      document.getElementById('streak-counter').textContent = streak + " days";
    }

    // For demo: increment streak when any day card fully complete
    document.querySelectorAll('.card').forEach(card => {
      const boxes = card.querySelectorAll('.task');
      card.addEventListener('change', () => {
        if ([...boxes].every(b => b.checked)) incrementStreak();
      });
    });

    /* ------------------------------
       CONFETTI
    ------------------------------- */
    function launchConfetti() {
      const duration = 2000;
      const end = Date.now() + duration;
      (function frame() {
        const colors = ["#0ff", "#f0f", "#0f0", "#ff0"];
        const confetti = document.createElement("div");
        confetti.style.position = "fixed";
        confetti.style.width = "10px";
        confetti.style.height = "10px";
        confetti.style.borderRadius = "50%";
        confetti.style.left = Math.random() * 100 + "vw";
        confetti.style.top = "-10px";
        confetti.style.background = colors[Math.floor(Math.random()*colors.length)];
        confetti.style.opacity = 0.7;
        confetti.style.zIndex = 9999;
        document.body.appendChild(confetti);
        let fall = setInterval(() => {
          confetti.style.top = parseInt(confetti.style.top) + 5 + "px";
          if (parseInt(confetti.style.top) > window.innerHeight) {
            confetti.remove(); clearInterval(fall);
          }
        }, 30);
        if (Date.now() < end) requestAnimationFrame(frame);
      }());
    }

    /* ------------------------------
       SETTINGS
    ------------------------------- */
    function resetProgress() {
      localStorage.clear();
      location.reload();
    }
    function toggleTheme() {
      document.body.classList.toggle("dark");
    }

    /* ------------------------------
       DAYS LEFT
    ------------------------------- */
    const today = new Date();
    const examDay = new Date("2025-09-13");
    const diff = Math.ceil((examDay - today)/(1000*60*60*24));
    document.getElementById('days-left').textContent = diff > 0 ? diff : 0;
  </script>

</body>
</html>
